============================= test session starts ==============================
platform darwin -- Python 3.13.3, pytest-8.3.5, pluggy-1.6.0
rootdir: /Users/jenieflortraub/Code_Projects/dme-sync
configfile: pyproject.toml
plugins: anyio-4.9.0
collected 1 item

tests/test_pinecone_needle.py E                                          [100%]

==================================== ERRORS ====================================
____________________ ERROR at setup of test_needle_queries _____________________

    @pytest.fixture(scope="module", autouse=True)
    def setup_and_teardown():
        # Upsert test vectors
>       index.upsert(vectors=TEST_VECTORS)

tests/test_pinecone_needle.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/pinecone/utils/error_handling.py:11: in inner_func
    return func(*args, **kwargs)
venv/lib/python3.13/site-packages/pinecone/data/index.py:141: in upsert
    return self._upsert_batch(vectors, namespace, _check_type, **kwargs)
venv/lib/python3.13/site-packages/pinecone/data/index.py:167: in _upsert_batch
    return self._vector_api.upsert_vectors(
venv/lib/python3.13/site-packages/pinecone/openapi_support/endpoint.py:102: in __call__
    return self.callable(self, *args, **kwargs)
venv/lib/python3.13/site-packages/pinecone/core/openapi/db_data/api/vector_operations_api.py:675: in __upsert_vectors
    return self.call_with_http_info(**kwargs)
venv/lib/python3.13/site-packages/pinecone/openapi_support/endpoint.py:134: in call_with_http_info
    return self.api_client.call_api(
venv/lib/python3.13/site-packages/pinecone/openapi_support/api_client.py:300: in call_api
    return self.__call_api(
venv/lib/python3.13/site-packages/pinecone/openapi_support/api_client.py:178: in __call_api
    raise e
venv/lib/python3.13/site-packages/pinecone/openapi_support/api_client.py:166: in __call_api
    response_data = self.request(
venv/lib/python3.13/site-packages/pinecone/openapi_support/api_client.py:380: in request
    return self.rest_client.POST(
venv/lib/python3.13/site-packages/pinecone/openapi_support/rest_utils.py:146: in POST
    return self.request(
venv/lib/python3.13/site-packages/pinecone/openapi_support/rest_urllib3.py:260: in request
    return raise_exceptions_or_return(r)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

r = <pinecone.openapi_support.rest_utils.RESTResponse object at 0x10213c7f0>

    def raise_exceptions_or_return(r: RESTResponse):
        logger.debug("response status: %s", r.status)
    
        if not 200 <= r.status <= 299:
            if r.status == 401:
                raise UnauthorizedException(http_resp=r)
    
            if r.status == 403:
                raise ForbiddenException(http_resp=r)
    
            if r.status == 404:
                raise NotFoundException(http_resp=r)
    
            if 500 <= r.status <= 599:
                raise ServiceException(http_resp=r)
    
>           raise PineconeApiException(http_resp=r)
E           pinecone.openapi_support.exceptions.PineconeApiException: (400)
E           Reason: Bad Request
E           HTTP response headers: HTTPHeaderDict({'Date': 'Tue, 20 May 2025 08:28:37 GMT', 'Content-Type': 'application/json', 'Content-Length': '132', 'Connection': 'keep-alive', 'x-pinecone-request-latency-ms': '88', 'x-pinecone-request-id': '7553267385360252258', 'x-envoy-upstream-service-time': '39', 'server': 'envoy'})
E           HTTP response body: {"code":3,"message":"Dense vectors must contain at least one non-zero value. Vector ID 'needle-3' contains only zeros","details":[]}

venv/lib/python3.13/site-packages/pinecone/openapi_support/rest_utils.py:49: PineconeApiException
=========================== short test summary info ============================
ERROR tests/test_pinecone_needle.py::test_needle_queries - pinecone.openapi_s...
=============================== 1 error in 0.79s ===============================
