============================= test session starts ==============================
platform darwin -- Python 3.13.3, pytest-8.3.5, pluggy-1.6.0
rootdir: /Users/jenieflortraub/Code_Projects/dme-sync
configfile: pyproject.toml
plugins: anyio-4.9.0
collected 1 item

tests/test_pinecone_needle.py F                                          [100%]

=================================== FAILURES ===================================
_____________________________ test_needle_queries ______________________________

    def test_needle_queries():
        for v in TEST_VECTORS:
            start = time.time()
            query_vec = v["values"]
            result = index.query(vector=query_vec, top_k=1, include_metadata=True)
            elapsed = time.time() - start
            assert result["matches"], f"No match for {v['id']}"
            top = result["matches"][0]
            print(f"Query for {v['id']} (desc: {v['metadata']['desc']}):")
            print(f"  Top match: {top['id']} (score: {top['score']:.4f}, latency: {elapsed:.3f}s)")
>           assert top["id"] == v["id"], f"Expected {v['id']}, got {top['id']}"
E           AssertionError: Expected needle-1, got 432e0d59d1c6ffd345eabf4380945789
E           assert '432e0d59d1c6...abf4380945789' == 'needle-1'
E             
E             - needle-1
E             + 432e0d59d1c6ffd345eabf4380945789

tests/test_pinecone_needle.py:39: AssertionError
----------------------------- Captured stdout call -----------------------------
Query for needle-1 (desc: all ones):
  Top match: 432e0d59d1c6ffd345eabf4380945789 (score: 0.0407, latency: 0.180s)
=========================== short test summary info ============================
FAILED tests/test_pinecone_needle.py::test_needle_queries - AssertionError: E...
============================== 1 failed in 2.12s ===============================
